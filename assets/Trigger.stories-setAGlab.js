import{j as e}from"./jsx-runtime-QvtbNqby.js";import{u as X}from"./index-BYMUMZMs.js";import{u as v}from"./usePrefix-BezXHAvh.js";import{_ as T,m as Z,E as ee}from"./floating-ui.react-zcwMlDfJ.js";import{c as R}from"./index-CjLpwf8N.js";import{P as a}from"./index-kGlasm3i.js";import{r as D,R as l}from"./index-BjzEU6Zr.js";import{u as re}from"./Tooltip-CPLX6X0E.js";import{T as B,d as se}from"./deprecate-X_RArzr0.js";import{g as te}from"./bucket-2-DqY0dT-j.js";import{L as O,u as E}from"./Link-D5xEs-Z1.js";import{V as F}from"./ViewYAML-CKT6AdML.js";import{T as K}from"./Table-BuHWprYL.js";import"./index-B0z81K34.js";import"./Icon-DeY_WDsw.js";import"./constants-BuFAfZC9.js";import"./Link-DRIuGUpd.js";import"./index-CfoIBI3E.js";import"./Button-DxuibFbN.js";import"./index-ED9P7qmL.js";import"./events-OVwOsPzJ.js";import"./index-Dc4QqC9m.js";import"./bucket-0-BV5tnCsW.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./mergeRefs-CTUecegF.js";import"./index-9NatbUAG.js";import"./index-DZApqWLJ.js";import"./bucket-12-D9InpaXv.js";import"./noopFn-g4z370MD.js";import"./Search-DGNYnC60.js";import"./FormContext-IWjAIOZU.js";import"./bucket-3-DTnTkg5v.js";const L=D.createContext({disabled:!1}),ae=i=>{let{disabled:n,children:s}=i;return l.createElement(L.Provider,{value:{disabled:n}},s)};function P(i){let{align:n="end",children:s,className:c,disabled:f=!1,isFlush:d=!1,ordered:x=!1,size:g,...N}=i;const m=v(),r=R(`${m}--accordion`,c,{[`${m}--accordion--${n}`]:n,[`${m}--accordion--${g}`]:g,[`${m}--layout--size-${g}`]:g,[`${m}--accordion--flush`]:d&&n!=="start"}),u=x?"ol":"ul";return l.createElement(ae,{disabled:f},l.createElement(u,T({className:r},N),s))}P.propTypes={align:a.oneOf(["start","end"]),children:a.node,className:a.string,disabled:a.bool,isFlush:a.bool,ordered:a.bool,size:a.oneOf(["sm","md","lg"])};const oe=i=>l.createElement("button",T({type:"button"},i));function V(i){let{children:n,className:s="",open:c=!1,onHeadingClick:f,renderExpando:d=oe,renderToggle:x,title:g="title",disabled:N,handleAnimationEnd:m,...r}=i;const[u,h]=D.useState(c),[y,M]=D.useState(c),_=D.useContext(L),t=typeof N=="boolean"?N:_.disabled,j=re("accordion-item"),o=v(),b=R({[`${o}--accordion__item`]:!0,[`${o}--accordion__item--active`]:u&&!t,[`${o}--accordion__item--disabled`]:t,[s]:!!s}),q=x||d,U=l.useCallback(k=>{k&&u&&(k.style.maxBlockSize="")},[u]);c!==y&&(h(c),M(c));function Y(k){const A=!u;h(A),f&&f({isOpen:A,event:k})}function J(k){u&&Z(k,ee)&&h(!1)}function Q(k){m&&m(k)}return l.createElement("li",T({className:b},r),l.createElement(q,{disabled:t,"aria-controls":j,"aria-expanded":u,className:`${o}--accordion__heading`,onClick:Y,onKeyDown:J,type:"button"},l.createElement(te,{className:`${o}--accordion__arrow`}),l.createElement(B,{as:"div",className:`${o}--accordion__title`},g)),l.createElement("div",{ref:U,className:`${o}--accordion__wrapper`,onTransitionEnd:Q},l.createElement("div",{id:j,className:`${o}--accordion__content`},n)))}V.propTypes={children:a.node,className:a.string,disabled:a.bool,onClick:a.func,onHeadingClick:a.func,open:a.bool,renderExpando:se(a.func),renderToggle:a.func,title:a.node};function z(i){let{className:n,children:s,...c}=i;const f=v(),d=R(`${f}--list__item`,n);return l.createElement(B,T({as:"li",className:d},c),s)}z.propTypes={children:a.node,className:a.string};function W(i){let{className:n,nested:s=!1,isExpressive:c=!1,...f}=i;const d=v(),x=R(`${d}--list--unordered`,n,{[`${d}--list--nested`]:s,[`${d}--list--expressive`]:c});return l.createElement("ul",T({className:x},f))}W.propTypes={children:a.node,className:a.string,isExpressive:a.bool,nested:a.bool};const G=({namespace:i,trigger:n})=>{const s=X(),c=v(),f=[{key:"name",header:s.formatMessage({id:"dashboard.tableHeader.name",defaultMessage:"Name"})},{key:"value",header:s.formatMessage({id:"dashboard.tableHeader.value",defaultMessage:"Value"})}],{bindings:d,interceptors:x,template:g}=n.spec||n,N=g.ref||g.name,m=n.name;return e.jsxs("div",{children:[m&&e.jsxs("h3",{children:["Trigger: ",m]}),e.jsxs("div",{className:"tkn--trigger-details",children:[d&&d.length!==0&&e.jsxs("div",{className:"tkn--trigger-resourcelinks",children:[e.jsx("span",{className:"tkn--trigger-resourcekind",children:s.formatMessage({id:"dashboard.triggerDetails.triggerBindings",defaultMessage:"TriggerBindings:"})}),e.jsx(W,{children:d.map(r=>e.jsx(z,{children:r.ref?e.jsx(O,{className:"tkn--trigger-resourcelink",to:r.kind==="ClusterTriggerBinding"?E.clusterTriggerBindings.byName({name:r.ref}):E.triggerBindings.byName({name:r.ref,namespace:i}),children:e.jsx("span",{title:r.ref,children:r.ref})}):e.jsx(F,{dark:!0,resource:r})},r.ref||r.name))})]}),e.jsxs("div",{className:"tkn--trigger-resourcelinks",children:[e.jsx("span",{className:"tkn--trigger-resourcekind",children:s.formatMessage({id:"dashboard.triggerDetails.triggerTemplate",defaultMessage:"TriggerTemplate:"})}),g.spec?e.jsx(F,{dark:!0,resource:g}):e.jsx(O,{className:"tkn--trigger-resourcelink",to:E.triggerTemplates.byName({name:N,namespace:i}),children:e.jsx("span",{title:N,children:N})})]})]}),x&&x.length!==0&&e.jsxs("div",{className:"tkn--trigger-interceptors",children:[e.jsx("span",{className:"tkn--trigger-resourcekind",children:s.formatMessage({id:"dashboard.triggerDetails.interceptors",defaultMessage:"Interceptors:"})}),e.jsx(P,{className:"tkn--trigger-interceptors-accordion",title:"Interceptors",children:x.map((r,u)=>{let h,y;const M=s.formatMessage({id:"dashboard.triggerDetails.interceptorNamespace",defaultMessage:"Namespace:"}),_=s.formatMessage({id:"dashboard.triggerDetails.interceptorName",defaultMessage:"Name:"});if(r.webhook){if(!r.webhook.objectRef)return null;h="Webhook";let t=[];r.webhook.header&&(t=r.webhook.header.map(o=>{const b={id:o.name,name:o.name,value:o.value};return Array.isArray(o.value)&&(b.value=o.value.join(", ")),b}));const j=s.formatMessage({id:"dashboard.triggerDetails.webhookInterceptorService",defaultMessage:"Service:"});y=e.jsxs(e.Fragment,{children:[e.jsx("p",{children:j}),e.jsxs("div",{className:"tkn--trigger-interceptor-service-details",children:[e.jsxs("p",{children:[e.jsx("span",{children:_}),r.webhook.objectRef.name]}),r.webhook.objectRef.namespace&&e.jsxs("p",{children:[e.jsx("span",{children:M}),r.webhook.objectRef.namespace]})]}),t.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:s.formatMessage({id:"dashboard.triggerDetails.interceptorHeader",defaultMessage:"Header:"})}),e.jsx(K,{headers:f,rows:t,size:"sm",emptyTextAllNamespaces:s.formatMessage({id:"dashboard.trigger.noHeaders",defaultMessage:"No headers found for this interceptor."}),emptyTextSelectedNamespace:s.formatMessage({id:"dashboard.trigger.noHeaders",defaultMessage:"No headers found for this interceptor."}),isSortable:!1})]})]})}else if(r.github||r.gitlab){let t;r.github?(h="GitHub",t=r.github):(h="GitLab",t=r.gitlab);const j=t.eventTypes?.join(", "),o=s.formatMessage({id:"dashboard.triggerDetails.webhookInterceptorSecret",defaultMessage:"Secret:"}),b=s.formatMessage({id:"dashboard.triggerDetails.webhookInterceptorSecretKey",defaultMessage:"Key:"});y=e.jsxs(e.Fragment,{children:[t.secretRef&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:o}),e.jsxs("div",{className:"tkn--trigger-interceptor-secret-details",children:[e.jsxs("p",{children:[_," ",t.secretRef.secretName]}),e.jsxs("p",{children:[b," ",t.secretRef.secretKey]}),t.secretRef.namespace&&e.jsxs("p",{children:[M," ",t.secretRef.namespace]})]})]}),e.jsxs("p",{children:["Event Types: ",j]})]})}else if(r.cel){h="CEL";const t=[{key:"key",header:s.formatMessage({id:"dashboard.tableHeader.key",defaultMessage:"Key"})},{key:"expression",header:s.formatMessage({id:"dashboard.tableHeader.expression",defaultMessage:"Expression"})}],o=(r.cel.overlays||[]).map(b=>({id:b.key,key:b.key,expression:b.expression}));y=e.jsxs(e.Fragment,{children:[r.cel.filter&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:s.formatMessage({id:"dashboard.triggerDetails.celInterceptorFilter",defaultMessage:"Filter:"})}),e.jsx("code",{className:`${c}--snippet--multi tkn--trigger-interceptor-cel-filter`,children:r.cel.filter})]}),e.jsx("p",{children:s.formatMessage({id:"dashboard.triggerDetails.celInterceptorOverlays",defaultMessage:"Overlays:"})}),e.jsx(K,{headers:t,rows:o,size:"sm",isSortable:!1,emptyTextAllNamespaces:s.formatMessage({id:"dashboard.trigger.noOverlays",defaultMessage:"No overlays found for this interceptor."}),emptyTextSelectedNamespace:s.formatMessage({id:"dashboard.trigger.noOverlays",defaultMessage:"No overlays found for this interceptor."})})]})}else if(r.ref){h="ClusterInterceptor";const t=r.ref.name;y=e.jsx(O,{to:E.clusterInterceptors.byName({name:t}),title:t,children:t})}else return null;const H=s.formatMessage({id:"dashboard.triggerDetails.interceptorTitle",defaultMessage:"{interceptorNumber}. ({interceptorType}) {interceptorName}"},{interceptorNumber:u+1,interceptorType:h,interceptorName:""});return e.jsx(V,{title:H,children:y},H)})})]})]})},ne=G;G.__docgenInfo={description:"",methods:[],displayName:"Trigger"};const p={namespace:"default",trigger:{name:"my-trigger",bindings:[{ref:"triggerbinding0"},{ref:"triggerbinding1"},{ref:"triggerbinding2"},{name:"triggerbinding3",value:"$(body.head_commit_id)"}],template:{ref:"triggertemplate"},interceptors:[{webhook:{header:[{name:"header0",value:"value0"},{name:"header1",value:["value1-0","value1-1","value1-2"]}],objectRef:{apiVersion:"v1",kind:"Service",name:"interceptor-service0",namespace:"foo"}}},{github:{secretRef:{secretName:"github-secret",secretKey:"secret"},eventTypes:["push","pull_request"]}},{gitlab:{secretRef:{secretName:"gitlab-secret",secretKey:"secret",namespace:"foo"},eventTypes:["Push Hook"]}},{cel:{filter:"body.matches('foo', 'bar')"}}]}},Ke={component:ne,title:"Trigger"},I={args:p},$={args:{...p,trigger:{...p.trigger,name:void 0}}},w={args:{...p,trigger:{...p.trigger,bindings:void 0}}},S={args:{...p,trigger:{...p.trigger,interceptors:void 0}}},C={args:{...p,trigger:{...p.trigger,interceptors:[{...p.trigger.interceptors[0],webhook:{...p.trigger.interceptors[0].webhook,header:void 0}}]}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  args: props
}`,...I.parameters?.docs?.source}}};$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:`{
  args: {
    ...props,
    trigger: {
      ...props.trigger,
      name: undefined
    }
  }
}`,...$.parameters?.docs?.source}}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  args: {
    ...props,
    trigger: {
      ...props.trigger,
      bindings: undefined
    }
  }
}`,...w.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`{
  args: {
    ...props,
    trigger: {
      ...props.trigger,
      interceptors: undefined
    }
  }
}`,...S.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {
    ...props,
    trigger: {
      ...props.trigger,
      interceptors: [{
        ...props.trigger.interceptors[0],
        webhook: {
          ...props.trigger.interceptors[0].webhook,
          header: undefined
        }
      }]
    }
  }
}`,...C.parameters?.docs?.source}}};const Be=["Default","NoName","NoBindings","NoInterceptors","NoHeadersInWebhookInterceptor"];export{I as Default,w as NoBindings,C as NoHeadersInWebhookInterceptor,S as NoInterceptors,$ as NoName,Be as __namedExportsOrder,Ke as default};
