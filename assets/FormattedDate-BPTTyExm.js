import{j as I}from"./jsx-runtime-QvtbNqby.js";import{_ as U,a as W,b as $,u as w,F as q}from"./index-BYMUMZMs.js";import{r as o}from"./index-BjzEU6Zr.js";var T=60,S=60*60,b=60*60*24;function E(e){var r=Math.abs(e);return r<T?"second":r<S?"minute":r<b?"hour":"day"}function V(e){switch(e){case"second":return 1;case"minute":return T;case"hour":return S;default:return b}}function B(e,r){if(!e)return 0;switch(r){case"second":return e;case"minute":return e*T;default:return e*S}}var H=["second","minute","hour"];function d(e){return e===void 0&&(e="second"),H.indexOf(e)>-1}var L=function(e){var r=w(),u=r.formatRelativeTime,a=r.textComponent,t=e.children,n=e.value,c=e.unit,l=U(e,["children","value","unit"]),s=u(n||0,c,l);return typeof t=="function"?t(s):a?o.createElement(a,null,s):o.createElement(o.Fragment,null,s)},N=function(e){var r=e.value,u=r===void 0?0:r,a=e.unit,t=a===void 0?"second":a,n=e.updateIntervalInSeconds,c=U(e,["value","unit","updateIntervalInSeconds"]);W(!n||!!(n&&d(t)),"Cannot schedule update with unit longer than hour");var l=o.useState(),s=l[0],M=l[1],D=o.useState(0),C=D[0],P=D[1],F=o.useState(0),i=F[0],x=F[1],y;(t!==s||u!==C)&&(P(u||0),M(t),x(d(t)?B(u,t):0)),o.useEffect(function(){function m(){clearTimeout(y)}if(m(),!n||!d(t))return m;var f=i-n,R=E(f);if(R==="day")return m;var _=V(R),A=f%_,p=f-A,h=p>=i?p-_:p,O=Math.abs(h-i);return i!==h&&(y=setTimeout(function(){return x(h)},O*1e3)),m},[i,n,t]);var g=u||0,v=t;if(d(t)&&typeof i=="number"&&n){v=E(i);var Y=V(v);g=Math.round(i/Y)}return o.createElement(L,$({value:g,unit:v},c))};N.displayName="FormattedRelativeTime";const k=N,j=({date:e,formatTooltip:r=a=>a,relative:u})=>{const a=w();if(!e)return null;let t;if(u&&Intl.RelativeTimeFormat)t=I.jsx(k,{numeric:"auto",updateIntervalInSeconds:10,value:(new Date(e).getTime()-Date.now())/1e3});else{const c=new Date().getFullYear()!==new Date(e).getFullYear()?"numeric":void 0;t=I.jsx(q,{value:e,day:"numeric",month:"short",year:c,hour:"numeric",minute:"numeric"})}let n=a.formatDate(e,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"});return n=r(n),I.jsx("span",{title:n,children:t})},K=j;j.__docgenInfo={description:"",methods:[],displayName:"FormattedDateWrapper",props:{formatTooltip:{defaultValue:{value:"formattedDate => formattedDate",computed:!1},required:!1}}};export{K as F};
