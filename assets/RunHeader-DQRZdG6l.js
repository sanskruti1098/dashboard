import{j as e}from"./jsx-runtime-QvtbNqby.js";import{r as f,R as u}from"./index-BjzEU6Zr.js";import{i as A}from"./index-BYMUMZMs.js";import{u as h}from"./usePrefix-BezXHAvh.js";import{_ as k}from"./floating-ui.react-zcwMlDfJ.js";import{P as a}from"./index-kGlasm3i.js";import{c as x}from"./index-CjLpwf8N.js";import{d as F}from"./index-Dc4QqC9m.js";import{c as C}from"./events-OVwOsPzJ.js";import{I as S}from"./index-ED9P7qmL.js";import{n as N}from"./noopFn-g4z370MD.js";import{L as H}from"./index-CNcVnUbU.js";import{c as L}from"./bucket-3-DTnTkg5v.js";import{h as P}from"./index-CfoIBI3E.js";import{F as D}from"./FormattedDate-BPTTyExm.js";function y(d){let{align:i="bottom",children:n,className:t,feedback:s="Copied!",feedbackTimeout:m=2e3,onAnimationEnd:r,onClick:l=N,...o}=d;const[c,p]=f.useState(""),b=h(),T=x(t,`${b}--copy`,{[`${b}--copy-btn--animating`]:c,[`${b}--copy-btn--${c}`]:c}),g=f.useCallback(F(()=>{p("fade-out")},m),[m]),$=f.useCallback(()=>{p("fade-in"),g()},[g]),_=v=>{v.animationName===`${b}--hide-feedback`&&p("")};f.useEffect(()=>()=>{g.cancel()},[g]);const R=o["aria-label"]??"";return u.createElement(S,k({closeOnActivation:!1,align:i,className:T,label:c?s:R,onClick:C([l,$]),onAnimationEnd:C([r,_])},o,{"aria-label":!n&&(c?s:o["aria-label"])||void 0}),n)}y.propTypes={align:a.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","right"]),children:a.node,className:a.string,feedback:a.string,feedbackTimeout:a.number,onAnimationEnd:a.func,onClick:a.func};function j(d){let{align:i="bottom",feedback:n="Copied!",feedbackTimeout:t=2e3,iconDescription:s="Copy to clipboard",className:m,onClick:r=N,...l}=d;const o=h();return u.createElement(H,{size:{default:"md",max:"lg"}},u.createElement(y,k({feedback:n,feedbackTimeout:t,onClick:r,align:i,className:x(m,`${o}--copy-btn`),"aria-label":s},l),u.createElement(L,{className:`${o}--snippet__icon`})))}j.propTypes={align:a.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","right"]),className:a.string,feedback:a.string,feedbackTimeout:a.number,iconDescription:a.string,onClick:a.func};const E=d=>{let{className:i,...n}=d;const t=h(),s=x({[`${t}--skeleton__placeholder`]:!0},i);return u.createElement("div",k({className:s},n))};E.propTypes={className:a.string};class M extends f.Component{copyStatusMessage=()=>{P(this.props.message)};render(){const{children:i,icon:n,intl:t,lastTransitionTime:s,loading:m,message:r,runName:l,reason:o,status:c,triggerHeader:p}=this.props;return e.jsx("header",{className:"tkn--pipeline-run-header","data-succeeded":c,"data-reason":o,children:m?e.jsx(E,{className:"tkn--header-skeleton",title:t.formatMessage({id:"dashboard.loading",defaultMessage:"Loadingâ€¦"})}):l&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"tkn--run-header--heading",children:[e.jsx("div",{className:"tkn--run-name",title:l,children:l}),n,e.jsx("span",{className:"tkn--time",children:s?t.formatMessage({id:"dashboard.lastUpdated",defaultMessage:"Last updated {time}"},{time:e.jsx(D,{date:s,relative:!0})}):null}),i]}),e.jsxs("div",{className:"tkn--status",children:[e.jsx("span",{className:"tkn--status-label",children:o}),r&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"tkn--status-message",title:r,children:r}),e.jsx(j,{feedback:t.formatMessage({id:"dashboard.clipboard.copied",defaultMessage:"Copied!"}),iconDescription:t.formatMessage({id:"dashboard.clipboard.copyStatusMessage",defaultMessage:"Copy status message to clipboard"}),onClick:this.copyStatusMessage})]})]}),p]})})}}const Z=A(M);M.__docgenInfo={description:"",methods:[{name:"copyStatusMessage",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RunHeader"};export{Z as R};
