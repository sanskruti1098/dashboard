import{j as a}from"./jsx-runtime-QvtbNqby.js";import{r as p}from"./index-BjzEU6Zr.js";import{i as c}from"./index-BYMUMZMs.js";import{F as g}from"./FormattedDuration-CpIuRcpd.js";import{g as l}from"./index-CfoIBI3E.js";import{S as h}from"./StatusIcon-B2CmmOh1.js";import{P as k}from"./bucket-12-D9InpaXv.js";class o extends p.Component{getDuration(){const{intl:n,stepStatus:r,taskRun:s}=this.props;let{completionTime:t,startTime:e}=s.status||{};return r&&({finishedAt:t,startedAt:e}=r.terminated||{}),!e||!t||new Date(e).getTime()===0?null:a.jsx("span",{className:"tkn--run-details-time",children:n.formatMessage({id:"dashboard.run.duration",defaultMessage:"Duration: {duration}"},{duration:a.jsx(g,{milliseconds:new Date(t).getTime()-new Date(e).getTime()})})})}statusLabel(){const{exitCode:n,hasWarning:r,intl:s,reason:t,status:e,taskRun:i}=this.props,{reason:d,status:u}=l(i);return e==="cancelled"||e==="terminated"&&(t==="TaskRunCancelled"||t==="TaskRunTimeout")?s.formatMessage({id:"dashboard.taskRun.status.cancelled",defaultMessage:"Cancelled"}):e==="running"?s.formatMessage({id:"dashboard.taskRun.status.running",defaultMessage:"Running"}):e==="terminated"?t==="Completed"?r?s.formatMessage({id:"dashboard.taskRun.status.succeeded.warning",defaultMessage:"Completed with exit code {exitCode}"},{exitCode:n}):s.formatMessage({id:"dashboard.taskRun.status.succeeded",defaultMessage:"Completed"}):s.formatMessage({id:"dashboard.taskRun.status.failed",defaultMessage:"Failed"}):u==="Unknown"&&d==="Pending"?s.formatMessage({id:"dashboard.taskRun.status.waiting",defaultMessage:"Waiting"}):s.formatMessage({id:"dashboard.taskRun.status.notRun",defaultMessage:"Not run"})}render(){const{displayName:n,hasWarning:r,intl:s,taskRun:t,type:e="step"}=this.props;let{reason:i,status:d}=this.props,u;const m=this.getDuration();return e==="taskRun"?({reason:i,status:d}=l(t),u=i||s.formatMessage({id:"dashboard.taskRun.status.pending",defaultMessage:"Pending"})):u=this.statusLabel(),a.jsxs("header",{className:"tkn--step-details-header","data-status":d,"data-reason":i,children:[a.jsxs("h2",{className:"tkn--details-header--heading",children:[a.jsx(h,{DefaultIcon:f=>a.jsx(k,{size:24,...f}),hasWarning:r,reason:i,status:d,...e==="step"?{type:"inverse"}:null}),a.jsx("span",{className:"tkn--run-details-name",title:n,children:n}),a.jsx("span",{className:"tkn--status-label",children:u})]}),m]})}}o.defaultProps={taskRun:{}};const N=c(o);o.__docgenInfo={description:"",methods:[{name:"getDuration",docblock:null,modifiers:[],params:[],returns:null},{name:"statusLabel",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DetailsHeader",props:{taskRun:{defaultValue:{value:"{}",computed:!1},required:!1}}};export{N as D};
