import{j as R}from"./jsx-runtime-QvtbNqby.js";import{R as s,r as f}from"./index-BjzEU6Zr.js";import{u as ut}from"./index-BYMUMZMs.js";import{u as j}from"./usePrefix-BezXHAvh.js";import{_ as E,u as mt,m as W,f as pt,c as ft,S as gt,d as bt,E as ht,H as xt,i as It,s as wt}from"./floating-ui.react-zcwMlDfJ.js";import{c as y}from"./index-CjLpwf8N.js";import{c as ke,L as ne,a as Oe}from"./index-eKhO17z2.js";import{P as t}from"./index-kGlasm3i.js";import{m as yt}from"./mergeRefs-CTUecegF.js";import{T as we,d as ye}from"./deprecate-X_RArzr0.js";import{F as Tt}from"./FormContext-IWjAIOZU.js";import{C as Te}from"./bucket-3-DTnTkg5v.js";import{c as _t,d as Ct}from"./bucket-2-DqY0dT-j.js";import{W as $t,a as Et}from"./bucket-18-CNixtB1a.js";import{k as St}from"./index-CfoIBI3E.js";import"./index-B0z81K34.js";import"./extends-CCbyfPlC.js";import"./Icon-DeY_WDsw.js";var _e,Ce;const $e={"clear.all":"clear.all","clear.selection":"clear.selection"},Dt={[$e["clear.all"]]:"Clear all selected items",[$e["clear.selection"]]:"Clear selected item"},Nt=n=>Dt[n];function Pe(n){let{clearSelection:p,selectionCount:l,translateWithId:d=Nt,disabled:a,onClearSelection:r,...g}=n;const i=j(),w=y(`${i}--list-box__selection`,{[`${i}--tag--filter`]:l,[`${i}--list-box__selection--multi`]:l}),x=d(l?"clear.all":"clear.selection"),S=y(`${i}--tag`,`${i}--tag--filter`,`${i}--tag--high-contrast`,{[`${i}--tag--disabled`]:a});function T(b){b.stopPropagation(),!a&&(p(b),r&&r(b))}return l?s.createElement("div",{className:S},s.createElement("span",{className:`${i}--tag__label`,title:l},l),s.createElement("button",{"aria-label":x,className:`${i}--tag__close-icon`,disabled:a,onClick:T,tabIndex:-1,title:x,type:"button"},_e||(_e=s.createElement(Te,null)))):s.createElement("button",E({},g,{"aria-label":x,className:w,disabled:a,onClick:T,tabIndex:-1,title:x,type:"button"}),Ce||(Ce=s.createElement(Te,null)))}Pe.propTypes={clearSelection:t.func.isRequired,disabled:t.bool,onClearSelection:t.func,onClick:t.func,onKeyDown:t.func,selectionCount:t.number,translateWithId:t.func};var Ee;const Se={"close.menu":"close.menu","open.menu":"open.menu"},kt={[Se["close.menu"]]:"Close",[Se["open.menu"]]:"Open"},Ot=n=>kt[n],Le=s.forwardRef(function(p,l){let{isOpen:d,translateWithId:a=Ot,...r}=p;const g=j(),i=y({[`${g}--list-box__menu-icon`]:!0,[`${g}--list-box__menu-icon--open`]:d}),w=a(d?"close.menu":"open.menu");return s.createElement("button",E({},r,{"aria-label":w,title:w,className:i,type:"button",tabIndex:"-1",ref:l}),Ee||(Ee=s.createElement(_t,null)))});Le.propTypes={isOpen:t.bool.isRequired,translateWithId:t.func};var Pt=Le;const{InputBlur:Lt,InputKeyDownEnter:Wt,FunctionToggleMenu:Rt,ToggleButtonClick:jt,ItemMouseMove:vt,InputKeyDownArrowUp:Vt,InputKeyDownArrowDown:Ft,MenuMouseLeave:Bt}=ke.stateChangeTypes,We=n=>typeof n=="string"?n:typeof n=="number"?`${n}`:n!==null&&typeof n=="object"&&"label"in n&&typeof n.label=="string"?n.label:"",De=()=>!0,Ne=n=>{let{initialSelectedItem:p,inputValue:l,itemToString:d,selectedItem:a}=n;return a?d(a):p?d(p):l||""},Mt=(n,p)=>{let{items:l,itemToString:d=We}=n;if(!p)return-1;const a=p.toLowerCase();for(let r=0;r<l.length;r++){const g=d(l[r]).toLowerCase();if(!l[r].disabled&&g.indexOf(a)!==-1)return r}return-1},At=wt(),se=f.forwardRef((n,p)=>{const{["aria-label"]:l="Choose an item",ariaLabel:d,autoAlign:a=!1,className:r,direction:g="bottom",disabled:i=!1,downshiftProps:w,helperText:x,id:S,initialSelectedItem:T,invalid:b,invalidText:D,items:N,itemToElement:v=null,itemToString:h=We,light:U,onChange:_,onInputChange:G,onToggleClick:oe,placeholder:ve,readOnly:P,selectedItem:V,shouldFilterItem:ae=De,size:Ve,titleText:le,translateWithId:re,warn:F,warnText:ie,allowCustomValue:k=!1,slug:B,...Fe}=n,{refs:C,floatingStyles:J}=mt(a?{placement:g,strategy:"fixed",middleware:[pt()],whileElementsMounted:ft}:{}),Q=C?.reference?.current?.clientWidth;f.useEffect(()=>{a&&(Object.keys(J).forEach(e=>{C.floating.current&&(C.floating.current.style[e]=J[e])}),Q&&C.floating.current&&(C.floating.current.style.width=Q+"px"))},[a,J,C.floating,Q]);const c=j(),{isFluid:L}=f.useContext(Tt),O=f.useRef(null),X=At(),[m,Y]=f.useState(Ne({initialSelectedItem:T,inputValue:"",itemToString:h,selectedItem:V})),[ce,Be]=f.useState(!1),[Me,Ae]=f.useState(),[Ke,ze]=f.useState(!1),Z=f.useRef(G);(!Ke||Me!==V)&&(ze(!0),Ae(V),Y(Ne({initialSelectedItem:T,inputValue:m,itemToString:h,selectedItem:V})));const M=(e,u,K)=>e.filter(o=>ae?ae({item:o,itemToString:u,inputValue:K}):De());f.useEffect(()=>{Z.current=G},[G]),f.useEffect(()=>{Z.current&&Z.current(m)},[m]);const qe=()=>{O?.current&&O.current.focus()},He=e=>M(N,h,e||null),Ue=e=>Mt({...n,items:He(e)},e),Ge=s.useCallback((e,u)=>{const{type:K,changes:o}=u,{highlightedIndex:$}=o;switch(K){case Lt:return e.inputValue&&$=="-1"&&o.selectedItem?{...o,inputValue:h(o.selectedItem)}:e.inputValue&&$=="-1"&&!k&&!o.selectedItem?{...o,inputValue:""}:o;case Wt:return k?(Y(m),he(o.selectedItem),_&&_({selectedItem:o.selectedItem,inputValue:m}),o):o.selectedItem&&!k?o:{...o,isOpen:!0};case Rt:case jt:return o.isOpen&&!o.selectedItem?{...o,highlightedIndex:0}:o;case Bt:return{...o,highlightedIndex:e.highlightedIndex};case Vt:case Ft:return $===-1?{...o,highlightedIndex:0}:o;case vt:return{...o,highlightedIndex:e.highlightedIndex};default:return o}},[k,m,_]),Je=e=>u=>{oe&&oe(u),u.target===O.current&&e&&(u.preventDownshiftDefault=!0,u?.persist?.())},de=!b&&F,Qe=y(`${c}--combo-box`,{[`${c}--list-box--up`]:g==="top",[`${c}--combo-box--warning`]:de,[`${c}--combo-box--readonly`]:P}),Xe=y(`${c}--label`,{[`${c}--label--disabled`]:i}),ue=`combobox-helper-text-${X}`,me=`combobox-warn-text-${X}`,pe=`combobox-invalid-text-${X}`,Ye=y(`${c}--form__helper-text`,{[`${c}--form__helper-text--disabled`]:i}),Ze=y(`${c}--list-box__wrapper`,[r,{[`${c}--list-box__wrapper--fluid--invalid`]:L&&b,[`${c}--list-box__wrapper--fluid--focus`]:L&&ce,[`${c}--list-box__wrapper--slug`]:B}]),et=y(`${c}--text-input`,{[`${c}--text-input--empty`]:!m,[`${c}--combo-box--input--focus`]:ce&&!L}),fe=v;let ge;B&&B.type?.displayName==="Slug"&&(ge=s.cloneElement(B,{size:"mini"}));const{getInputProps:tt,getItemProps:nt,getLabelProps:st,getMenuProps:ot,getToggleButtonProps:at,isOpen:I,highlightedIndex:ee,selectItem:be,selectedItem:te,toggleMenu:A,setHighlightedIndex:he}=ke({...w,items:M(N,h,m),inputValue:m,itemToString:e=>h(e),onInputValueChange(e){let{inputValue:u}=e;Y(u||""),he(Ue(u))},onSelectedItemChange(e){let{selectedItem:u}=e;_({selectedItem:u})},initialSelectedItem:T,inputId:S,stateReducer:Ge,isItemDisabled(e,u){return e.disabled}}),lt=at({disabled:i||P,onClick:Je(I),onMouseUp(e){I&&e.stopPropagation()}}),xe=e=>{Be(e.type==="focus")},rt=P?{onKeyDown:e=>{e.key!=="Tab"&&e.preventDefault()}}:{},it=b&&D&&pe||F&&ie&&me||x&&!L&&ue||void 0,Ie=f.useMemo(()=>ot({"aria-label":d||l,ref:a?C.setFloating:null}),[a,d,l]);return s.createElement("div",{className:Ze},le&&s.createElement(we,E({as:"label",className:Xe},st()),le),s.createElement(ne,{onFocus:xe,onBlur:xe,className:Qe,disabled:i,invalid:b,invalidText:D,invalidTextId:pe,isOpen:I,light:U,size:Ve,warn:F,ref:a?C.setReference:null,warnText:ie,warnTextId:me},s.createElement("div",{className:`${c}--list-box__field`},s.createElement("input",E({disabled:i,className:et,type:"text",tabIndex:0,"aria-haspopup":"listbox",title:O?.current?.value},tt({"aria-controls":I?void 0:Ie.id,placeholder:ve,ref:{...yt(O,p)},onKeyDown:e=>{W(e,gt)&&e.stopPropagation(),W(e,bt)&&(!m||k)&&(A(),ee!==-1&&be(M(N,h,m)[ee]),k&&I&&m&&_({selectedItem:te,inputValue:m}),e.preventDownshiftDefault=!0,e?.persist?.()),W(e,ht)&&m&&e.target===O.current&&I&&(A(),e.preventDownshiftDefault=!0,e?.persist?.()),W(e,xt)&&e.code!=="Numpad7"&&e.target.setSelectionRange(0,0),W(e,It)&&e.code!=="Numpad1"&&e.target.setSelectionRange(e.target.value.length,e.target.value.length),e.altKey&&e.key=="ArrowDown"&&(e.preventDownshiftDefault=!0,I||A()),e.altKey&&e.key=="ArrowUp"&&(e.preventDownshiftDefault=!0,I&&A())}}),Fe,rt,{readOnly:P,"aria-describedby":it})),b&&s.createElement($t,{className:`${c}--list-box__invalid-icon`}),de&&s.createElement(Et,{className:`${c}--list-box__invalid-icon ${c}--list-box__invalid-icon--warning`}),m&&s.createElement(Pe,{clearSelection:()=>{be(null)},translateWithId:re,disabled:i||P,onClearSelection:qe,selectionCount:0}),s.createElement(Pt,E({},lt,{isOpen:I,translateWithId:re}))),ge,s.createElement(ne.Menu,Ie,I?M(N,h,m).map((e,u)=>{const o=e!==null&&typeof e=="object"&&"text"in e&&v?e.text?.toString():h(e),$=nt({item:e,index:u}),ct=$["aria-disabled"],{"aria-disabled":Ut,...dt}=$;return s.createElement(ne.MenuItem,E({key:$.id,isActive:te===e,isHighlighted:ee===u,title:o,disabled:ct},dt),fe?s.createElement(fe,E({key:$.id},e)):h(e),te===e&&s.createElement(Ct,{className:`${c}--list-box__menu-item__selected-icon`}))}):null)),x&&!b&&!F&&!L&&s.createElement(we,{as:"div",id:ue,className:Ye},x))});se.displayName="ComboBox";se.propTypes={allowCustomValue:t.bool,"aria-label":t.string,ariaLabel:ye(t.string),autoAlign:t.bool,className:t.string,direction:t.oneOf(["top","bottom"]),disabled:t.bool,downshiftProps:t.object,helperText:t.node,id:t.string.isRequired,initialSelectedItem:t.oneOfType([t.object,t.string,t.number]),invalid:t.bool,invalidText:t.node,itemToElement:t.func,itemToString:t.func,items:t.array.isRequired,light:ye(t.bool),onChange:t.func.isRequired,onInputChange:t.func,onToggleClick:t.func,placeholder:t.string,readOnly:t.bool,selectedItem:t.oneOfType([t.object,t.string,t.number]),shouldFilterItem:t.func,size:Oe,slug:t.node,titleText:t.node,translateWithId:t.func,warn:t.bool,warnText:t.node};const Re=n=>{let{className:p,size:l,hideLabel:d,...a}=n;const r=j(),g=y(p,`${r}--skeleton`,`${r}--form-item`,{[`${r}--list-box--${l}`]:l});return s.createElement("div",E({className:g},a),!d&&s.createElement("span",{className:`${r}--label ${r}--skeleton`}),s.createElement("div",{className:`${r}--skeleton ${r}--dropdown`}))};Re.propTypes={className:t.string,hideLabel:t.bool,size:Oe};const Kt=n=>n?n.text:"",zt=n=>typeof n=="string"?{id:n,text:n}:n,qt={items:[]},je=({className:n,disabled:p,emptyText:l,id:d,inline:a,items:r=qt.items,label:g,loading:i=!1,onChange:w,selectedItem:x,titleText:S,...T})=>{const b=ut(),D=j(),[N,v]=f.useState(0);if(i)return R.jsxs("div",{className:`${D}--list-box__wrapper`,children:[S&&R.jsx("span",{className:`${D}--label`,children:S}),R.jsx(Re,{className:`${D}--combo-box ${n||""}`,id:d,inline:a})]});const h=r.map(zt),U=l||b.formatMessage({id:"dashboard.tooltipDropdown.empty",defaultMessage:"No items found"});return f.createElement(se,{className:n,disabled:p,...x&&{downshiftProps:{onStateChange:_=>{_.type==="__function_select_item__"&&_.inputValue===""&&(w({}),v(Date.now()))}}},id:d,inline:a,items:h,itemToString:Kt,key:N,onChange:w,placeholder:h.length===0?U:g,selectedItem:x,titleText:S,translateWithId:St(b),...T})},Ht=je;je.__docgenInfo={description:"",methods:[],displayName:"TooltipDropdown",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},loading:{defaultValue:{value:"false",computed:!1},required:!1}}};const pn={args:{id:"tooltip-dropdown-id",label:"Select an item",items:["item 1","item 2","item 3","item 4","item 5","item 6"],loading:!1,onChange:()=>{},titleText:""},component:Ht,decorators:[n=>R.jsx("div",{style:{width:"200px"},children:R.jsx(n,{})})],title:"TooltipDropdown"},z={},q={args:{loading:!0}},H={args:{items:[]}};z.parameters={...z.parameters,docs:{...z.parameters?.docs,source:{originalSource:"{}",...z.parameters?.docs?.source}}};q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...q.parameters?.docs?.source}}};H.parameters={...H.parameters,docs:{...H.parameters?.docs,source:{originalSource:`{
  args: {
    items: []
  }
}`,...H.parameters?.docs?.source}}};const fn=["Default","Loading","Empty"];export{z as Default,H as Empty,q as Loading,fn as __namedExportsOrder,pn as default};
